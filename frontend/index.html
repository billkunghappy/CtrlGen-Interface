<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CtrlGen</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex"> <!-- Prevent this page from being indexed -->

    <link rel="icon" type="image/png" href="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/285/writing-hand_270d-fe0f.png">

    <!-- Redirect to http -->
    <script>
      if (location.protocol == "https:") {
        location.protocol = "http:";
      }
    </script>

    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Bootstrap Icon-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Quill Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

    <!-- Custom -->
    <link rel="stylesheet" href="./css/animation.css"/>
    <link rel="stylesheet" href="./css/dropdown.css"/>
    <link rel="stylesheet" href="./css/index.css"/>

    <!-- Data -->
    <script>const domain = 'story';</script>
    <script src="./js/config.js" defer></script>
    <script src="./js/helper.js" defer></script> 
    <script src="./js/script.js" defer></script>
    <script src="./js/logging.js" defer></script>
    <script src="./js/animation.js" defer></script> 
    <script src="./js/editor.js" defer></script>
    <script src="./js/dropdown.js" defer></script>
    <script src="./js/async.js" defer></script>
    <script src="./js/slider.js" defer></script>
    <script src="./js/control_panel.js" defer></script>
    <script src="./js/index.js" defer></script>

  </head>

  <body>
    <div id="header" data-toggle="tooltip" data-placement="bottom" title="Press tab to get suggestions from AI!">
      <h1 class="text-light">
        Ctrl+G<i id='robot' class="fas fa-pen-nib"></i>
        <!-- <i style="background-image: url(icons/icons8-ctrl-96.png);" class="title_icon"></i>
        <i style="background-image: url(icons/icons8-g-key-96.png);" class="title_icon"></i> -->
        
        <i id='setting-btn' class="fa fa-cog" aria-hidden="true"></i>
        <!-- We hide this -->
        <div class="text-light" style="display: none;">
          <div class="form-check form-switch" id = "ctrl-switch-wrapper">
            <!-- To check whether this is checked: https://stackoverflow.com/questions/24278494/jquery-if-checkbox-is-checked-bootstrap-switch -->
            <input class="form-check-input" type="checkbox" id="ctrl-switch" checked>
          </div>
          <h3>Controlling</h3>
        </div>
      </h1>
      <!-- <div class="form-group row">
        <label for="ctrl-n" class="col-sm-4 col-form-label">Control Generation</label>
        <div class="col-sm-4">
          <div class="form-check form-switch" style="display: block;">
            <input class="form-check-input" type="checkbox" id="flexSwitchCheckDefault">
          </div>
        </div>
        <button type="button" class="btn btn-secondary col-sm-4">Reset</button>
      </div> -->
      
    </div>

    <div id="shortcuts">
      <div style="margin-bottom: 5px;">
        <b>Keyboard shortcuts</b>
        <span id="shortcuts-close-btn" class="close"><i class="fas fa-times"></i></span><br/>
      </div>
      <div>
        <span class="key" style="margin-right: 5px;">Tab</span> Get suggestions</br>
        <span class="key">Shift</span> + <span class="key" style="margin-right: 5px;">Tab</span> Reopen suggestions<br/>
        <span class="key">↑</span><span class="key" style="margin-right: 5px;">↓</span> Navigate suggestion<br/>
        <span class="key" style="margin-right: 5px;">Enter</span> Select suggestion
      </div>
    </div>

    <!-- ADD the control panel
    <a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
      Link with href
    </a>
    <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
      Button with data-bs-target
    </button>
    
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">Offcanvas</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div>
          Some text as placeholder. In real life you can have the elements you have chosen. Like, text, images, lists, etc.
        </div>
        <div class="dropdown mt-3">
          <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
            Dropdown button
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </div>
      </div>
    </div> -->

    <div id="control" class="slideright">
      <div id="control-panel-btn">
        <i class="bi bi-robot"></i>
      </div>
      <form>
        <fieldset>
          <!-- Disable model selection -->
          <!-- <div class="form-group row">
            <label for="ctrl-model" class="col-sm-4 col-form-label">model</label>
            <div class="col-sm-6 ml-auto mr-0">
              <select id="ctrl-model" class="form-select">
                <option value="na" selected>N/A</option>
              </select>
            </div>
          </div> -->

          <div id="more-control" style="display: none;">
            <div class="form-group row">
              <label for="ctrl-n" class="col-sm-4 col-form-label">Number of Suggestions</label>
              <div class="col-sm-6 ml-auto mr-0">
                <input type="text" id="ctrl-n" class="form-control">
              </div>
            </div>

            <div class="form-group row">
              <label for="ctrl-max_tokens" class="col-sm-4 col-form-label">Max Tokens</label>
              <div class="col-sm-6 ml-auto mr-0">
                <input type="text" id="ctrl-max_tokens" class="form-control">
              </div>
            </div>

            <div class="form-group row">
              <label for="ctrl-temperature" class="col-sm-4 col-form-label">Temperature</label>
              <div class="col-sm-6 ml-auto mr-0">
                <input type="text" id="ctrl-temperature" class="form-control">
              </div>
            </div>
            <div id="all-control" style="display: none;">
              <div class="form-group row">
                <label for="ctrl-top_p" class="col-sm-4 col-form-label">top_p</label>
                <div class="col-sm-6 ml-auto mr-0">
                  <input type="text" id="ctrl-top_p" class="form-control">
                </div>
              </div>

              <div class="form-group row">
                <label for="ctrl-presence_penalty" class="col-sm-4 col-form-label">presence_penalty</label>
                <div class="col-sm-6 ml-auto mr-0">
                  <input type="text" id="ctrl-presence_penalty" class="form-control">
                </div>
              </div>

              <div class="form-group row">
                <label for="ctrl-frequency_penalty" class="col-sm-4 col-form-label">frequency_penalty</label>
                <div class="col-sm-6 ml-auto mr-0">
                  <input type="text" id="ctrl-frequency_penalty" class="form-control">
                </div>
              </div>
            </div>
          </div>
          <!-- Our Control -->
          <hr class="mt-2 mb-3" id="sep-control" style="display: none;"/>
          <div class="card card-body">
            <div class="form-group row">
              <label for="ctrl-keyword" class="col-sm-6 col-form-label">Keywords</label>
              <div class="col-sm-6 ml-auto mr-0">
                <input type="text" id="ctrl-keyword" class="form-control", placeholder="A;B">
              </div>
            </div>
          </div>
          <div class="card card-body" style="display: none;">
            <div class="form-group row">
              <label for="ctrl-banword" class="col-sm-6 col-form-label">Banned Keywords</label>
              <div class="col-sm-6 ml-auto mr-0">
                <input type="text" id="ctrl-banword" class="form-control", placeholder="A;B">
              </div>
            </div>
          </div>
          <!-- Length Control -->
          <div class="card card-body">
            <div class="form-group">
              <div class="row">
                <label for="ctrl-length_unit" class="col-sm-6 col-form-label">Length</label>
                <div class="col-sm-6 ml-auto mr-0">
                  <select id="ctrl-length_unit" class="form-select form-control">
                    <option value="none" selected>None</option>
                    <option value="token">Token</option>
                    <option value="word">Word</option>
                    <!-- <option value="sentence">Sentence</option>
                    <option value="passage">Passage</option> -->
                  </select>
                </div>
              </div>
              <!-- may need to change to multi-range slider in the future -->
              <div class="row" id="ctrl-length-slider-row">
                <div class="col-sm-10 mx-auto col-centered">
                  <!-- <input id="ctrl-length" class="multi-range" type="range" value="1" max="100" oninput="this.nextElementSibling.value = this.value" style="width: 80%;"/> -->
                  <div id="ctrl-length-slider" class="range-slider"></div>
                </div>
              </div>
            </div>
          </div>
          <!-- Soft Control -->
          <div class="card card-body">
            <div class="form-group row">
              <label for="ctrl-instruct" class="col-sm-4 col-form-label">Instruction</label>
              <div class="col-sm-8 ml-auto mr-0">
                <input type="text" id="ctrl-instruct" class="form-control", placeholder="Continue the text _____ .">
              </div>
            </div>
          </div>
          <!-- Token Control -->
          <div class="row" id="ctrl-token-slider-row">
            <!-- <p>
              <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#ctrl_token_collapse" aria-expanded="false" aria-controls="collapseExample">
                Token Control
              </button>
            </p> -->
            <div class="collapse show slideright" id="ctrl-token-collapse" style="display: none !important;">
              <!-- <div class="collapse show slideright" id="ctrl-token-collapse">-->
              <div class="card card-body">
                <i class="bi bi-bug ctrl-token-icon ctrl-token-status" id="ctrl-token-fail"></i>
                <i class="bi bi-check ctrl-token-icon ctrl-token-status" id="ctrl-token-success"></i>
                <div class="spinner-border ctrl-token-status" role="status" id="ctrl-token-spinner">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <label class="col-sm-12 col-form-label col-centered" style="text-align: center; margin-bottom: 30px;" data-toggle="tooltip" data-placement="bottom" title="Scroll the slidebar to check model's output with different token length">
                  Try different token length!
                </label>
                <div class="col-sm-10 mx-auto col-centered">
                  <!-- <input id="ctrl-length" class="multi-range" type="range" value="1" max="100" oninput="this.nextElementSibling.value = this.value" style="width: 80%;"/> -->
                  <div id="ctrl-token-slider" class="range-slider single-slider"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group row">
            <button type="button" class="btn btn-outline-danger" id = "ctrl-reset-btn">Reset</button>  
          </div>
        </fieldset>
      </form>
    </div>

    <div id="frontend">
      <div id="editor-view">
        <div id="editor-container">
        </div>
      </div>
    </div>
    <!-- <div id="frontend-overlay-wrapper"> -->
      <div id="frontend-overlay" class="dropdown-menu hidden">
      </div>
    <!-- </div> -->

    <!-- Footer -->
    <footer id="footer">
      <!-- <span class="text-muted"><small>
        Made by <a href="#">anonymous</a> &nbsp;&nbsp;&nbsp;
        &copy; Copyright 2024. All Rights Reserved.
      </small></span> -->

      <button id="finish-btn" type="button" class="btn btn-light" disabled><i class="fas fa-check"></i>Save your work</button>
      <!-- <button id="finish-replay-btn" type="button" class="btn btn-light" disabled><i class="fas fa-check"></i>Get a replay link</button> -->
      <span id="verification-code" class="text-muted do-not-display"></span>
    </footer><!-- Footer -->

    <!-- Bootstrap -->
    <script src="./lib/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> -->

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/ec39425d5e.js" crossorigin="anonymous"></script>

    <!-- Include the Quill library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Include the range slider API: https://n3r4zzurr0.in/range-slider-input/ -->
    <script src="https://cdn.jsdelivr.net/npm/range-slider-input@2.4/dist/rangeslider.umd.min.js"></script>
  </body>
</html>
